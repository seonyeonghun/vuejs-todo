<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>vue-shoppingmall</title>
    <!-- 개발버전, 도움되는 콘솔 경고를 포함. -->
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css" integrity="sha512-NmLkDIU1C/C88wi324HBc+S2kLhi08PN5GDeUVVVC/BVt/9Izdsc9SVeVfA1UZbY3sHUlDSyRXhCzHfr6hmPPw==" crossorigin="anonymous" />
    <link rel="stylesheet" href="css/design.css">
</head>
<body>
    <h1>shoppingmall-app</h1>
    <p>vue.js 쇼핑몰 리스트페이지 만들기</p>
    <div id="app">
        <ul>
            <li v-for="(item,idx) in items" v-bind:key="item.text">
                <figure>
                    <img v-bind:src="item.url" v-bind:alt="item.text">
                    <figcaption>{{ item.title }}<span>남은수량 : {{ item.count }}</span></figcaption>
                </figure>
                <p>
                    <strong>{{ item.price }}{{ item.unit1 }}</strong><em class="sale-pct">{{ item.sale }}{{ item.unit2 }}</em>
                </p>
                <button v-on:click="buyItem">구매하기</button>
                <button v-on:click="cartItem(idx)">장바구니</button>
            </li>
        </ul>
    </div>
    <script>
        var app = new Vue({
            el: '#app',
            data: {
                items: [
                    {
                        url:'https://picsum.photos/id/10/400/250',
                        text: this.title,
                        title: '이어폰',
                        price: 30000,
                        sale: 20,
                        unit1: '(원)',
                        unit2: '%',
                        count: 10
                    },
                    {
                        url:'https://picsum.photos/id/20/400/250',
                        text: this.title,
                        title: '케이스',
                        price: 15000,
                        sale: 20,
                        unit1: '(원)',
                        unit2: '%',
                        count: 50
                    },
                    {
                        url:'https://picsum.photos/id/30/400/250',
                        text: this.title,
                        title: '지문방지필름',
                        price: 10000,
                        sale: 20,
                        unit1: '(원)',
                        unit2: '%',
                        count: 30
                    },
                    {
                        url:'https://picsum.photos/id/40/400/250',
                        text: this.title,
                        title: '태블릿거치대',
                        price: 12000,
                        sale: 10,
                        unit1: '(원)',
                        unit2: '%',
                        count: 20
                    },
                    {
                        url:'https://picsum.photos/id/10/400/250',
                        text: this.title,
                        title: '충전기',
                        price: 15000,
                        sale: 10,
                        unit1: '(원)',
                        unit2: '%',
                        count: 10
                    },
                    {
                        url:'https://picsum.photos/id/20/400/250',
                        text: this.title,
                        title: '터치펜',
                        price: 10000,
                        sale: 100,
                        unit1: '(원)',
                        unit2: '%',
                        count: 20
                    },
                    {
                        url:'https://picsum.photos/id/30/400/250',
                        text: this.title,
                        title: '전자파 차단필름',
                        price: 50000,
                        sale: 10,
                        unit1: '(원)',
                        unit2: '%',
                        count: 100
                    },
                    {
                        url:'https://picsum.photos/id/40/400/250',
                        text: this.title,
                        title: '칫솔',
                        price: 2000,
                        sale: 0,
                        unit1: '(원)',
                        unit2: '%',
                        count: 1000
                    }
                ]
            },
            methods : {
                buyItem: function(){
                    alert("구매페이지로 이동합니다.");
                    // 실제 db에서 반영해야 하지만, 다른 view로 라우팅하면 됨(a.k.a 맵핑)
                },
                cartItem: function(idx){ 
                    alert("장바구니에 "+idx+"추가합니다.");
                    // 실제 db에서 반영해야 하지만, vue에서는 배열/오브젝트에서 Vue.set, Vue.delete 할 수 있음
                    this.$set(this.items[idx], this.items[idx].count, this.items[idx].count--);
                }
            }
        });
    </script>
</body>
</html>